import{_ as t,c as i,o as a,a2 as o}from"./chunks/framework.BLHWSx9w.js";const n="/assets/NewExtSim._fndRLtk.png",e="/assets/NewExtSim2.WYiqASjp.png",s="/assets/EditExtSim.6NYdCTox.png",l="/assets/DeleteExtSim.9dnEowaR.png",r="/assets/DeleteExtSim2.CQ66C8jx.png",m="/assets/DeleteExtSim3.ByBqpP25.png",u="/assets/ExtSimAction.DNBcRFzN.png",d="/assets/ExtSimAction2.DDCPyGYl.png",c="/assets/ExtSimAction3.Bl5Mo6hF.png",h="/assets/ExtSimAction4.-bt-QlDb.png",p="/assets/ExtSimAction5.C5VdtJ2f.png",g="/assets/ExtSimAction6.DNgbwlf-.png",x="/assets/ExtSimAction7.BwgL1APr.png",q="/assets/CompModifyOptions.D1JhqugZ.png",w="/assets/OtherExtSimOptions.CC148wOp.png",S="/assets/PingOptions.B98m3T__.png",D=JSON.parse('{"title":"External Simulations","description":"","frontmatter":{},"headers":[],"relativePath":"Modeling/externalSims.md","filePath":"Modeling/externalSims.md"}'),f={name:"Modeling/externalSims.md"},b=o('<h1 id="external-simulations" tabindex="-1">External Simulations <a class="header-anchor" href="#external-simulations" aria-label="Permalink to &quot;External Simulations&quot;">​</a></h1><p>EMRALD can be loosely coupled with external solvers through a network messaging protocol. For example, EMRALD can provide direction to the Neutrino 3D fluid solver analysis module through an open-standard message sent through the XMPP messaging protocol.</p><p>Integrating an external simulation into the state diagram is done by defining variables for data to be sent between the codes along with &quot;external sim message&quot;&quot; actions to start, modify and stop the other simulation from the EMRALD model. Any changes by the external simulation to variables inside EMRALD will automatically trigger any events that use that variable. So, for each component that can have a failure from the 3D simulation, the modeler must add a variable and an event in the component&#39;s state diagram evaluating that variable to determine failure. The following describes the pieces required to make a model that couples to an external simulation, the video <a href="https://www.youtube.com/watch?v=IgduGTaZGR8&amp;list=PLX2nBoWRisnXWhC2LD9j4jV0iFzQbRcFX&amp;index=7" target="_blank" rel="noreferrer">Two Way Coupling</a> also shows how test a model or the external simulation.</p><h2 id="creating-a-new-external-simulation" tabindex="-1">Creating a New External Simulation <a class="header-anchor" href="#creating-a-new-external-simulation" aria-label="Permalink to &quot;Creating a New External Simulation&quot;">​</a></h2><p>For any model connecting to an external simulation the first step is to create a reference for the connection. This is done using the right side drop down menu. Hover over the [+] icon and select &quot;New External Sim&quot; from the drop down menu. <br><img src="'+n+'" style="width:300px;"></p><p>The External Simulation Editor window will open in the Modeling Area. Fill it out and press &quot;SAVE&quot;<br><img src="'+e+'" style="width:700px;"></p><h2 id="editing-an-external-simulation-link" tabindex="-1">Editing an External Simulation Link <a class="header-anchor" href="#editing-an-external-simulation-link" aria-label="Permalink to &quot;Editing an External Simulation Link&quot;">​</a></h2><p>On the Left Navigation Frame, expand the External Sims section. Either...</p><p><strong>Option 1:</strong> Double click on the External Simulation that you want to edit or</p><p><strong>Option 2:</strong> Right-click on the External Simulation that you want to edit. A dropdown menu will appear and click &quot;Edit Properties...&quot;.<br><img src="'+s+'" style="width:300px;"></p><p>The External Simulation Editor window will open in the Modeling Area. Edit the fields as needed and press &quot;SAVE&quot;<br><img src="'+e+'" style="width:600px;"></p><h2 id="deleting-an-external-simulation-link" tabindex="-1">Deleting an External Simulation Link <a class="header-anchor" href="#deleting-an-external-simulation-link" aria-label="Permalink to &quot;Deleting an External Simulation Link&quot;">​</a></h2><p>On the Left Navigation Frame, right-click on the individual external simulation and click on &quot;Delete&quot; in the menu that appears.<br><img src="'+l+'" style="width:300px;"></p><p>A confirmation window will appear in the Modeling Area. Click &quot;Yes.&quot;<br><img src="'+r+'" alt="Delete External Sim Step 2"></p><p>The external simulation will be deleted and no longer be listed in the Left Navigation Frame.<br><img src="'+m+'" style="width:300px;"></p><h2 id="external-simulation-message-action" tabindex="-1">External Simulation Message Action <a class="header-anchor" href="#external-simulation-message-action" aria-label="Permalink to &quot;External Simulation Message Action&quot;">​</a></h2><p>To incorporate an external simulation into your model, you must send a message to start the other simulation by adding a External Simulation Message Action when the simulation is to start up.</p><p>First make sure that the External Simulation Link is created first by following the steps in <a href="#creating-a-new-external-simulation">Creating a New External Simulation</a>.</p><p>Open the Diagram you would like to incorporate an external simulation in. Locate the State you would like to add the action to and either right-click on the immediate action label or on the event you would like to add it to. Click &quot;New Action&quot;. <br><img src="'+u+'" alt="New External Sim Action Step 1"></p><p>An Action Properties window should appear in Modeling Area. To the right of &quot;type:&quot; click the field currently labeled &quot;Transition&quot; to expand the drop down menu. Click on &quot;Ext. Sim Message.&quot;<br><img src="'+d+'" alt="New External Sim Action Step 2"></p><p>The fields in the bottom half of the Action Properties should have changed to look like the following. Each type of message requires the &quot;External Sim&quot; the message will be sent to.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>There can be more than one external simulation for a model, but currently your model must not let more than one be &quot;Started&quot; and running in the EMRALD model execution at the same EMRALD simulation time. This capability will be added at a future time.</p></div><p><img src="'+c+'" alt="New External Sim Action Step 3"></p><p>The various actions available in the &quot;Sim Action&quot; dropdown menu will explained later. The focus now will be on <strong>&quot;Open Sim&quot;</strong> which allows sends a message to start the external simulation. To change the Sim Action to OpenSim, click the field currently labeled &quot;Comp Modify&quot; to expand the drop down menu. Click on &quot;Open Sim.&quot; <br><img src="'+h+'" alt="New External Sim Action Step 4"></p><p>Next select your external simulation. Click the field to expand the drop down menu. Click on the external simulation you want to incorporate.<br><img src="'+p+'" alt="New External Sim Action Step 5"></p><p>Fill out the remaining fields with your desired specifications. &quot;Model Reference&quot; and &quot;Config Data&quot; are optional parameters sent to the simulation and will need to be filled out according to the needs of the simulation. &quot;Duration&quot; is also sent to the simulation as a safety quit time, or a max run time relative to when this message was sent. But it is best to make sure the model stops the simulation at the appropriate time. Click &quot;SAVE&quot;<br><img src="'+g+'" alt="New External Sim Action Step 6"></p><p>Your action will now be listed in the state and section (Immediate or Event) you added it to.<br><img src="'+x+'" alt="New External Sim Action Step 7"></p><p>The External Simulation Message Action type can also perform other actions relating the external simulation. Those will be explained below.</p><h3 id="comp-modify" tabindex="-1">Comp Modify <a class="header-anchor" href="#comp-modify" aria-label="Permalink to &quot;Comp Modify&quot;">​</a></h3><p>This message sends the current value of the specified variable to the simulation. <img src="'+q+'" alt="Comp Modify Options"></p><h3 id="cancel-sim" tabindex="-1">Cancel Sim <a class="header-anchor" href="#cancel-sim" aria-label="Permalink to &quot;Cancel Sim&quot;">​</a></h3><p>This message tells the simulation to stop running and should be sent when no more information from the external simulation is needed. <img src="'+w+'" alt="Cancel Sim Options"></p><h3 id="ping" tabindex="-1">Ping <a class="header-anchor" href="#ping" aria-label="Permalink to &quot;Ping&quot;">​</a></h3><p>This message is for testing. Could be used to tell the connected simulation to output a status. <img src="'+S+'" alt="Ping Options"></p><h2 id="message-passing-modeling-requriements" tabindex="-1">Message Passing Modeling Requriements <a class="header-anchor" href="#message-passing-modeling-requriements" aria-label="Permalink to &quot;Message Passing Modeling Requriements&quot;">​</a></h2><ul><li>You must start with an &quot;Open Sim&quot; action message.</li><li>You should send a &quot;Cancel Sim&quot; action message when it is no longer needed or before the EMRALD model hits a termination state.</li></ul><h2 id="external-simulation-requriements" tabindex="-1">External Simulation Requriements <a class="header-anchor" href="#external-simulation-requriements" aria-label="Permalink to &quot;External Simulation Requriements&quot;">​</a></h2><ul><li>The connected simulation must return a &quot;SimStarted&quot; message after it receives an &quot;Open Sim&quot; Message.</li><li>The EMRALD simulation automatically sends callback times after it receives a &quot;SimStarted&quot; message or a &quot;Timer&quot; message. The connected simulation must send a &quot;Timer&quot; message whenever the local time reaches the next specified callback time. Whenever it receives new callback times old ones must be removed.</li><li>The connected simulation must wait for a &quot;Continue&quot; message after sending any message to EMRALD.</li><li>After receiving a &quot;Cancel Sim&quot; message the software must reset the model and be ready for another &quot;Open Sim&quot; message.</li></ul><p>See <a href="/Modeling/xmppProtocol.html">XMPP communication protocol</a> for details on coupling code to EMRALD.</p>',39),E=[b];function _(k,y,A,v,M,T){return a(),i("div",null,E)}const P=t(f,[["render",_]]);export{D as __pageData,P as default};
