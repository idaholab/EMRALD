var sankeyTimeline;(()=>{var t={821:(t,e,n)=>{var i=n(46);t.exports=function(t,e){var n,r=[],o=[],a=[],s={},u=[];function l(t){a[t]=!1,s.hasOwnProperty(t)&&Object.keys(s[t]).forEach((function(e){delete s[t][e],a[e]&&l(e)}))}function h(t){var e,i,r=!1;for(o.push(t),a[t]=!0,e=0;e<u[t].length;e++)(i=u[t][e])===n?(c(n,o),r=!0):a[i]||(r=h(i));if(r)l(t);else for(e=0;e<u[t].length;e++){i=u[t][e];var f=s[i];f||(f={},s[i]=f),f[i]=!0}return o.pop(),r}function c(t,n){var i=[].concat(n).concat(t);e?e(i):r.push(i)}function f(e){!function(e){for(var n=0;n<t.length;n++)(n<e||!t[n])&&(t[n]=[]),t[n]=t[n].filter((function(t){return t>=e}))}(e);for(var n,r=i(t).components.filter((function(t){return t.length>1})),o=1/0,a=0;a<r.length;a++)for(var s=0;s<r[a].length;s++)r[a][s]<o&&(o=r[a][s],n=a);var u=r[n];if(!u)return!1;var l=t.map((function(t,e){return-1===u.indexOf(e)?[]:t.filter((function(t){return-1!==u.indexOf(t)}))}));return{leastVertex:o,adjList:l}}n=0;for(var d=t.length;n<d;){var p=f(n);if(n=p.leastVertex,u=p.adjList){for(var y=0;y<u.length;y++)for(var g=0;g<u[y].length;g++){var m=u[y][g];a[+m]=!1,s[m]={}}h(n),n+=1}else n=d}return e?void 0:r}},46:t=>{"use strict";t.exports=function(t){for(var e=t.length,n=new Array(e),i=new Array(e),r=new Array(e),o=new Array(e),a=new Array(e),s=new Array(e),u=0;u<e;++u)n[u]=-1,i[u]=0,r[u]=!1,o[u]=0,a[u]=-1,s[u]=[];var l,h=0,c=[],f=[];function d(e){var u=[e],l=[e];for(n[e]=i[e]=h,r[e]=!0,h+=1;l.length>0;){e=l[l.length-1];var d=t[e];if(o[e]<d.length){for(var p=o[e];p<d.length;++p){var y=d[p];if(n[y]<0){n[y]=i[y]=h,r[y]=!0,h+=1,u.push(y),l.push(y);break}r[y]&&(i[e]=0|Math.min(i[e],i[y])),a[y]>=0&&s[e].push(a[y])}o[e]=p}else{if(i[e]===n[e]){var g=[],m=[],v=0;for(p=u.length-1;p>=0;--p){var w=u[p];if(r[w]=!1,g.push(w),m.push(s[w]),v+=s[w].length,a[w]=c.length,w===e){u.length=p;break}}c.push(g);var x=new Array(v);for(p=0;p<m.length;p++)for(var _=0;_<m[p].length;_++)x[--v]=m[p][_];f.push(x)}l.pop()}}}for(u=0;u<e;++u)n[u]<0&&d(u);for(u=0;u<f.length;u++){var p=f[u];if(0!==p.length){p.sort((function(t,e){return t-e})),l=[p[0]];for(var y=1;y<p.length;y++)p[y]!==p[y-1]&&l.push(p[y]);f[u]=l}}return{components:c,adjacencyList:f}}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var i={};(()=>{"use strict";function t(){}function e(e){return null==e?t:function(){return this.querySelector(e)}}function r(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function o(){return[]}function a(t){return null==t?o:function(){return this.querySelectorAll(t)}}function s(t){return function(){return this.matches(t)}}function u(t){return function(e){return e.matches(t)}}n.r(i),n.d(i,{default:()=>Yn});var l=Array.prototype.find;function h(){return this.firstElementChild}var c=Array.prototype.filter;function f(){return Array.from(this.children)}function d(t){return new Array(t.length)}function p(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function y(t){return function(){return t}}function g(t,e,n,i,r,o){for(var a,s=0,u=e.length,l=o.length;s<l;++s)(a=e[s])?(a.__data__=o[s],i[s]=a):n[s]=new p(t,o[s]);for(;s<u;++s)(a=e[s])&&(r[s]=a)}function m(t,e,n,i,r,o,a){var s,u,l,h=new Map,c=e.length,f=o.length,d=new Array(c);for(s=0;s<c;++s)(u=e[s])&&(d[s]=l=a.call(u,u.__data__,s,e)+"",h.has(l)?r[s]=u:h.set(l,u));for(s=0;s<f;++s)l=a.call(t,o[s],s,o)+"",(u=h.get(l))?(i[s]=u,u.__data__=o[s],h.delete(l)):n[s]=new p(t,o[s]);for(s=0;s<c;++s)(u=e[s])&&h.get(d[s])===u&&(r[s]=u)}function v(t){return t.__data__}function w(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function x(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}p.prototype={constructor:p,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var _="http://www.w3.org/1999/xhtml";const b={svg:"http://www.w3.org/2000/svg",xhtml:_,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function k(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),b.hasOwnProperty(e)?{space:b[e],local:t}:t}function $(t){return function(){this.removeAttribute(t)}}function N(t){return function(){this.removeAttributeNS(t.space,t.local)}}function E(t,e){return function(){this.setAttribute(t,e)}}function T(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function A(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function S(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function L(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function M(t){return function(){this.style.removeProperty(t)}}function C(t,e,n){return function(){this.style.setProperty(t,e,n)}}function H(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function O(t,e){return t.style.getPropertyValue(e)||L(t).getComputedStyle(t,null).getPropertyValue(e)}function j(t){return function(){delete this[t]}}function W(t,e){return function(){this[t]=e}}function B(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function P(t){return t.trim().split(/^|\s+/)}function z(t){return t.classList||new D(t)}function D(t){this._node=t,this._names=P(t.getAttribute("class")||"")}function R(t,e){for(var n=z(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function I(t,e){for(var n=z(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function X(t){return function(){R(this,t)}}function q(t){return function(){I(this,t)}}function F(t,e){return function(){(e.apply(this,arguments)?R:I)(this,t)}}function V(){this.textContent=""}function Y(t){return function(){this.textContent=t}}function U(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function K(){this.innerHTML=""}function G(t){return function(){this.innerHTML=t}}function J(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Q(){this.nextSibling&&this.parentNode.appendChild(this)}function Z(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function tt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===_&&e.documentElement.namespaceURI===_?e.createElement(t):e.createElementNS(n,t)}}function et(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function nt(t){var e=k(t);return(e.local?et:tt)(e)}function it(){return null}function rt(){var t=this.parentNode;t&&t.removeChild(this)}function ot(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function at(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function st(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function ut(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,o=e.length;i<o;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function lt(t,e,n){return function(){var i,r=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var a=0,s=r.length;a<s;++a)if((i=r[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function ht(t,e,n){var i=L(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function ct(t,e){return function(){return ht(this,t,e)}}function ft(t,e){return function(){return ht(this,t,e.apply(this,arguments))}}D.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var dt=[null];function pt(t,e){this._groups=t,this._parents=e}function yt(){return new pt([[document.documentElement]],dt)}pt.prototype=yt.prototype={constructor:pt,select:function(t){"function"!=typeof t&&(t=e(t));for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o)for(var a,s,u=n[o],l=u.length,h=r[o]=new Array(l),c=0;c<l;++c)(a=u[c])&&(s=t.call(a,a.__data__,c,u))&&("__data__"in a&&(s.__data__=a.__data__),h[c]=s);return new pt(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return r(t.apply(this,arguments))}}(t):a(t);for(var e=this._groups,n=e.length,i=[],o=[],s=0;s<n;++s)for(var u,l=e[s],h=l.length,c=0;c<h;++c)(u=l[c])&&(i.push(t.call(u,u.__data__,c,l)),o.push(u));return new pt(i,o)},selectChild:function(t){return this.select(null==t?h:function(t){return function(){return l.call(this.children,t)}}("function"==typeof t?t:u(t)))},selectChildren:function(t){return this.selectAll(null==t?f:function(t){return function(){return c.call(this.children,t)}}("function"==typeof t?t:u(t)))},filter:function(t){"function"!=typeof t&&(t=s(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],u=a.length,l=i[r]=[],h=0;h<u;++h)(o=a[h])&&t.call(o,o.__data__,h,a)&&l.push(o);return new pt(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,v);var n=e?m:g,i=this._parents,r=this._groups;"function"!=typeof t&&(t=y(t));for(var o=r.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var h=i[l],c=r[l],f=c.length,d=w(t.call(h,h&&h.__data__,l,i)),p=d.length,x=s[l]=new Array(p),_=a[l]=new Array(p),b=u[l]=new Array(f);n(h,c,x,_,b,d,e);for(var k,$,N=0,E=0;N<p;++N)if(k=x[N]){for(N>=E&&(E=N+1);!($=_[E])&&++E<p;);k._next=$||null}}return(a=new pt(a,i))._enter=s,a._exit=u,a},enter:function(){return new pt(this._enter||this._groups.map(d),this._parents)},exit:function(){return new pt(this._exit||this._groups.map(d),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,o=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?o.remove():n(o),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,o=i.length,a=Math.min(r,o),s=new Array(r),u=0;u<a;++u)for(var l,h=n[u],c=i[u],f=h.length,d=s[u]=new Array(f),p=0;p<f;++p)(l=h[p]||c[p])&&(d[p]=l);for(;u<r;++u)s[u]=n[u];return new pt(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],o=r.length-1,a=r[o];--o>=0;)(i=r[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=x);for(var n=this._groups,i=n.length,r=new Array(i),o=0;o<i;++o){for(var a,s=n[o],u=s.length,l=r[o]=new Array(u),h=0;h<u;++h)(a=s[h])&&(l[h]=a);l.sort(e)}return new pt(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,o=i.length;r<o;++r){var a=i[r];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,o=e[n],a=0,s=o.length;a<s;++a)(r=o[a])&&t.call(r,r.__data__,a,o);return this},attr:function(t,e){var n=k(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?N:$:"function"==typeof e?n.local?S:A:n.local?T:E)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?M:"function"==typeof e?H:C)(t,e,null==n?"":n)):O(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?j:"function"==typeof e?B:W)(t,e)):this.node()[t]},classed:function(t,e){var n=P(t+"");if(arguments.length<2){for(var i=z(this.node()),r=-1,o=n.length;++r<o;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?F:e?X:q)(n,e))},text:function(t){return arguments.length?this.each(null==t?V:("function"==typeof t?U:Y)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?K:("function"==typeof t?J:G)(t)):this.node().innerHTML},raise:function(){return this.each(Q)},lower:function(){return this.each(Z)},append:function(t){var e="function"==typeof t?t:nt(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,n){var i="function"==typeof t?t:nt(t),r=null==n?it:"function"==typeof n?n:e(n);return this.select((function(){return this.insertBefore(i.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(rt)},clone:function(t){return this.select(t?at:ot)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,o=st(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?lt:ut,i=0;i<a;++i)this.each(s(o[i],e,n));return this}var s=this.node().__on;if(s)for(var u,l=0,h=s.length;l<h;++l)for(i=0,u=s[l];i<a;++i)if((r=o[i]).type===u.type&&r.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?ft:ct)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],o=0,a=r.length;o<a;++o)(i=r[o])&&(yield i)}};const gt=yt;function mt(t){return"string"==typeof t?new pt([[document.querySelector(t)]],[document.documentElement]):new pt([[t]],dt)}function vt(t){return"string"==typeof t?new pt([document.querySelectorAll(t)],[document.documentElement]):new pt([r(t)],dt)}function wt(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function xt(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function _t(){}var bt=.7,kt=1/bt,$t="\\s*([+-]?\\d+)\\s*",Nt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Et="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Tt=/^#([0-9a-f]{3,8})$/,At=new RegExp(`^rgb\\(${$t},${$t},${$t}\\)$`),St=new RegExp(`^rgb\\(${Et},${Et},${Et}\\)$`),Lt=new RegExp(`^rgba\\(${$t},${$t},${$t},${Nt}\\)$`),Mt=new RegExp(`^rgba\\(${Et},${Et},${Et},${Nt}\\)$`),Ct=new RegExp(`^hsl\\(${Nt},${Et},${Et}\\)$`),Ht=new RegExp(`^hsla\\(${Nt},${Et},${Et},${Nt}\\)$`),Ot={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function jt(){return this.rgb().formatHex()}function Wt(){return this.rgb().formatRgb()}function Bt(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Tt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Pt(e):3===n?new It(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?zt(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?zt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=At.exec(t))?new It(e[1],e[2],e[3],1):(e=St.exec(t))?new It(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Lt.exec(t))?zt(e[1],e[2],e[3],e[4]):(e=Mt.exec(t))?zt(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ct.exec(t))?Ut(e[1],e[2]/100,e[3]/100,1):(e=Ht.exec(t))?Ut(e[1],e[2]/100,e[3]/100,e[4]):Ot.hasOwnProperty(t)?Pt(Ot[t]):"transparent"===t?new It(NaN,NaN,NaN,0):null}function Pt(t){return new It(t>>16&255,t>>8&255,255&t,1)}function zt(t,e,n,i){return i<=0&&(t=e=n=NaN),new It(t,e,n,i)}function Dt(t){return t instanceof _t||(t=Bt(t)),t?new It((t=t.rgb()).r,t.g,t.b,t.opacity):new It}function Rt(t,e,n,i){return 1===arguments.length?Dt(t):new It(t,e,n,null==i?1:i)}function It(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Xt(){return`#${Yt(this.r)}${Yt(this.g)}${Yt(this.b)}`}function qt(){const t=Ft(this.opacity);return`${1===t?"rgb(":"rgba("}${Vt(this.r)}, ${Vt(this.g)}, ${Vt(this.b)}${1===t?")":`, ${t})`}`}function Ft(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Vt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Yt(t){return((t=Vt(t))<16?"0":"")+t.toString(16)}function Ut(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Gt(t,e,n,i)}function Kt(t){if(t instanceof Gt)return new Gt(t.h,t.s,t.l,t.opacity);if(t instanceof _t||(t=Bt(t)),!t)return new Gt;if(t instanceof Gt)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),o=Math.max(e,n,i),a=NaN,s=o-r,u=(o+r)/2;return s?(a=e===o?(n-i)/s+6*(n<i):n===o?(i-e)/s+2:(e-n)/s+4,s/=u<.5?o+r:2-o-r,a*=60):s=u>0&&u<1?0:a,new Gt(a,s,u,t.opacity)}function Gt(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Jt(t){return(t=(t||0)%360)<0?t+360:t}function Qt(t){return Math.max(0,Math.min(1,t||0))}function Zt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}wt(_t,Bt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:jt,formatHex:jt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Kt(this).formatHsl()},formatRgb:Wt,toString:Wt}),wt(It,Rt,xt(_t,{brighter(t){return t=null==t?kt:Math.pow(kt,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?bt:Math.pow(bt,t),new It(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new It(Vt(this.r),Vt(this.g),Vt(this.b),Ft(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xt,formatHex:Xt,formatHex8:function(){return`#${Yt(this.r)}${Yt(this.g)}${Yt(this.b)}${Yt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:qt,toString:qt})),wt(Gt,(function(t,e,n,i){return 1===arguments.length?Kt(t):new Gt(t,e,n,null==i?1:i)}),xt(_t,{brighter(t){return t=null==t?kt:Math.pow(kt,t),new Gt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?bt:Math.pow(bt,t),new Gt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new It(Zt(t>=240?t-240:t+120,r,i),Zt(t,r,i),Zt(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Gt(Jt(this.h),Qt(this.s),Qt(this.l),Ft(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ft(this.opacity);return`${1===t?"hsl(":"hsla("}${Jt(this.h)}, ${100*Qt(this.s)}%, ${100*Qt(this.l)}%${1===t?")":`, ${t})`}`}}));var te={value:()=>{}};function ee(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new ne(i)}function ne(t){this._=t}function ie(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function re(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function oe(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=te,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}ne.prototype=ee.prototype={constructor:ne,on:function(t,e){var n,i=this._,r=ie(t+"",i),o=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=r[o]).type)i[n]=oe(i[n],t.name,e);else if(null==e)for(n in i)i[n]=oe(i[n],t.name,null);return this}for(;++o<a;)if((n=(t=r[o]).type)&&(n=re(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ne(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),o=0;o<n;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(i=this._[t]).length;o<n;++o)i[o].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,o=i.length;r<o;++r)i[r].value.apply(e,n)}};const ae=ee;function se(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const ue={passive:!1},le={capture:!0,passive:!1};function he(t){t.stopImmediatePropagation()}function ce(t){t.preventDefault(),t.stopImmediatePropagation()}const fe=t=>()=>t;function de(t,{sourceEvent:e,subject:n,target:i,identifier:r,active:o,x:a,y:s,dx:u,dy:l,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:o,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:h}})}function pe(t){return!t.ctrlKey&&!t.button}function ye(){return this.parentNode}function ge(t,e){return null==e?{x:t.x,y:t.y}:e}function me(){return navigator.maxTouchPoints||"ontouchstart"in this}function ve(t){return t*t*t}de.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var we,xe,_e=0,be=0,ke=0,$e=0,Ne=0,Ee=0,Te="object"==typeof performance&&performance.now?performance:Date,Ae="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Se(){return Ne||(Ae(Le),Ne=Te.now()+Ee)}function Le(){Ne=0}function Me(){this._call=this._time=this._next=null}function Ce(t,e,n){var i=new Me;return i.restart(t,e,n),i}function He(){Ne=($e=Te.now())+Ee,_e=be=0;try{!function(){Se(),++_e;for(var t,e=we;e;)(t=Ne-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_e}()}finally{_e=0,function(){for(var t,e,n=we,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:we=e);xe=t,je(i)}(),Ne=0}}function Oe(){var t=Te.now(),e=t-$e;e>1e3&&(Ee-=e,$e=t)}function je(t){_e||(be&&(be=clearTimeout(be)),t-Ne>24?(t<1/0&&(be=setTimeout(He,t-Te.now()-Ee)),ke&&(ke=clearInterval(ke))):(ke||($e=Te.now(),ke=setInterval(Oe,1e3)),_e=1,Ae(He)))}function We(t,e,n){var i=new Me;return e=null==e?0:+e,i.restart((n=>{i.stop(),t(n+e)}),e,n),i}Me.prototype=Ce.prototype={constructor:Me,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Se():+n)+(null==e?0:+e),this._next||xe===this||(xe?xe._next=this:we=this,xe=this),this._call=t,this._time=n,je()},stop:function(){this._call&&(this._call=null,this._time=1/0,je())}};var Be=ae("start","end","cancel","interrupt"),Pe=[];function ze(t,e,n,i,r,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var i,r=t.__transition;function o(u){var l,h,c,f;if(1!==n.state)return s();for(l in r)if((f=r[l]).name===n.name){if(3===f.state)return We(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete r[l]):+l<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete r[l])}if(We((function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,i=new Array(c=n.tween.length),l=0,h=-1;l<c;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=f);i.length=h+1}}function a(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=i.length;++o<a;)i[o].call(t,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var i in n.state=6,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=Ce((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:i,group:r,on:Be,tween:Pe,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function De(t,e){var n=Ie(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Re(t,e){var n=Ie(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Ie(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Xe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var qe,Fe=180/Math.PI,Ve={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ye(t,e,n,i,r,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*i)&&(n-=t*u,i-=e*u),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,u/=s),t*i<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Fe,skewX:Math.atan(u)*Fe,scaleX:a,scaleY:s}}function Ue(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],u=[];return o=t(o),a=t(a),function(t,i,r,o,a,s){if(t!==r||i!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:Xe(t,r)},{i:u-2,x:Xe(i,o)})}else(r||o)&&a.push("translate("+r+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:Xe(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,a.rotate,s,u),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:Xe(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,a.skewX,s,u),function(t,e,n,i,o,a){if(t!==n||e!==i){var s=o.push(r(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Xe(t,n)},{i:s-2,x:Xe(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(t){for(var e,n=-1,i=u.length;++n<i;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var Ke=Ue((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ve:Ye(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Ge=Ue((function(t){return null==t?Ve:(qe||(qe=document.createElementNS("http://www.w3.org/2000/svg","g")),qe.setAttribute("transform",t),(t=qe.transform.baseVal.consolidate())?Ye((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ve)}),", ",")",")");function Je(t,e){var n,i;return function(){var r=Re(this,t),o=r.tween;if(o!==n)for(var a=0,s=(i=n=o).length;a<s;++a)if(i[a].name===e){(i=i.slice()).splice(a,1);break}r.tween=i}}function Qe(t,e,n){var i,r;if("function"!=typeof n)throw new Error;return function(){var o=Re(this,t),a=o.tween;if(a!==i){r=(i=a).slice();for(var s={name:e,value:n},u=0,l=r.length;u<l;++u)if(r[u].name===e){r[u]=s;break}u===l&&r.push(s)}o.tween=r}}function Ze(t,e,n){var i=t._id;return t.each((function(){var t=Re(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Ie(t,i).value[e]}}function tn(t,e,n,i,r){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*i+a*r)/6}const en=t=>()=>t;function nn(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):en(isNaN(t)?e:t)}const rn=function t(e){var n=function(t){return 1==(t=+t)?nn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):en(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=Rt(t)).r,(e=Rt(e)).r),r=n(t.g,e.g),o=n(t.b,e.b),a=nn(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=o(e),t.opacity=a(e),t+""}}return i.gamma=t,i}(1);function on(t){return function(e){var n,i,r=e.length,o=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=Rt(e[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=t(o),a=t(a),s=t(s),i.opacity=1,function(t){return i.r=o(t),i.g=a(t),i.b=s(t),i+""}}}on((function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],o=t[i+1],a=i>0?t[i-1]:2*r-o,s=i<e-1?t[i+2]:2*o-r;return tn((n-i/e)*e,a,r,o,s)}})),on((function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),r=t[(i+e-1)%e],o=t[i%e],a=t[(i+1)%e],s=t[(i+2)%e];return tn((n-i/e)*e,r,o,a,s)}}));var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(an.source,"g");function un(t,e){var n,i,r,o=an.lastIndex=sn.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=an.exec(t))&&(i=sn.exec(e));)(r=i.index)>o&&(r=e.slice(o,r),s[a]?s[a]+=r:s[++a]=r),(n=n[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,u.push({i:a,x:Xe(n,i)})),o=sn.lastIndex;return o<e.length&&(r=e.slice(o),s[a]?s[a]+=r:s[++a]=r),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,i=0;i<e;++i)s[(n=u[i]).i]=n.x(t);return s.join("")})}function ln(t,e){var n;return("number"==typeof e?Xe:e instanceof Bt?rn:(n=Bt(e))?(e=n,rn):un)(t,e)}function hn(t){return function(){this.removeAttribute(t)}}function cn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fn(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===i?r:r=e(i=a,n)}}function dn(t,e,n){var i,r,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===i?r:r=e(i=a,n)}}function pn(t,e,n){var i,r,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(t))===(s=u+"")?null:a===i&&s===r?o:(r=s,o=e(i=a,u));this.removeAttribute(t)}}function yn(t,e,n){var i,r,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(t.space,t.local))===(s=u+"")?null:a===i&&s===r?o:(r=s,o=e(i=a,u));this.removeAttributeNS(t.space,t.local)}}function gn(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function mn(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function vn(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&mn(t,r)),n}return r._value=e,r}function wn(t,e){var n,i;function r(){var r=e.apply(this,arguments);return r!==i&&(n=(i=r)&&gn(t,r)),n}return r._value=e,r}function xn(t,e){return function(){De(this,t).delay=+e.apply(this,arguments)}}function _n(t,e){return e=+e,function(){De(this,t).delay=e}}function bn(t,e){return function(){Re(this,t).duration=+e.apply(this,arguments)}}function kn(t,e){return e=+e,function(){Re(this,t).duration=e}}function $n(t,e){if("function"!=typeof e)throw new Error;return function(){Re(this,t).ease=e}}function Nn(t,e,n){var i,r,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?De:Re;return function(){var a=o(this,t),s=a.on;s!==i&&(r=(i=s).copy()).on(e,n),a.on=r}}var En=gt.prototype.constructor;function Tn(t){return function(){this.style.removeProperty(t)}}function An(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function Sn(t,e,n){var i,r;function o(){var o=e.apply(this,arguments);return o!==r&&(i=(r=o)&&An(t,o,n)),i}return o._value=e,o}function Ln(t){return function(e){this.textContent=t.call(this,e)}}function Mn(t){var e,n;function i(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&Ln(i)),e}return i._value=t,i}var Cn=0;function Hn(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function On(t){return gt().transition(t)}function jn(){return++Cn}var Wn=gt.prototype;Hn.prototype=On.prototype={constructor:Hn,select:function(t){var n=this._name,i=this._id;"function"!=typeof t&&(t=e(t));for(var r=this._groups,o=r.length,a=new Array(o),s=0;s<o;++s)for(var u,l,h=r[s],c=h.length,f=a[s]=new Array(c),d=0;d<c;++d)(u=h[d])&&(l=t.call(u,u.__data__,d,h))&&("__data__"in u&&(l.__data__=u.__data__),f[d]=l,ze(f[d],n,i,d,f,Ie(u,i)));return new Hn(a,this._parents,n,i)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=a(t));for(var i=this._groups,r=i.length,o=[],s=[],u=0;u<r;++u)for(var l,h=i[u],c=h.length,f=0;f<c;++f)if(l=h[f]){for(var d,p=t.call(l,l.__data__,f,h),y=Ie(l,n),g=0,m=p.length;g<m;++g)(d=p[g])&&ze(d,e,n,g,p,y);o.push(p),s.push(l)}return new Hn(o,s,e,n)},selectChild:Wn.selectChild,selectChildren:Wn.selectChildren,filter:function(t){"function"!=typeof t&&(t=s(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var o,a=e[r],u=a.length,l=i[r]=[],h=0;h<u;++h)(o=a[h])&&t.call(o,o.__data__,h,a)&&l.push(o);return new Hn(i,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,r=n.length,o=Math.min(i,r),a=new Array(i),s=0;s<o;++s)for(var u,l=e[s],h=n[s],c=l.length,f=a[s]=new Array(c),d=0;d<c;++d)(u=l[d]||h[d])&&(f[d]=u);for(;s<i;++s)a[s]=e[s];return new Hn(a,this._parents,this._name,this._id)},selection:function(){return new En(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=jn(),i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var h=Ie(a,e);ze(a,t,n,l,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Hn(i,this._parents,t,n)},call:Wn.call,nodes:Wn.nodes,node:Wn.node,size:Wn.size,empty:Wn.empty,each:Wn.each,on:function(t,e){var n=this._id;return arguments.length<2?Ie(this.node(),n).on.on(t):this.each(Nn(n,t,e))},attr:function(t,e){var n=k(t),i="transform"===n?Ge:ln;return this.attrTween(t,"function"==typeof e?(n.local?yn:pn)(n,i,Ze(this,"attr."+t,e)):null==e?(n.local?cn:hn)(n):(n.local?dn:fn)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=k(t);return this.tween(n,(i.local?vn:wn)(i,e))},style:function(t,e,n){var i="transform"==(t+="")?Ke:ln;return null==e?this.styleTween(t,function(t,e){var n,i,r;return function(){var o=O(this,t),a=(this.style.removeProperty(t),O(this,t));return o===a?null:o===n&&a===i?r:r=e(n=o,i=a)}}(t,i)).on("end.style."+t,Tn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var i,r,o;return function(){var a=O(this,t),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(t),u=s=O(this,t)),a===u?null:a===i&&u===r?o:(r=u,o=e(i=a,s))}}(t,i,Ze(this,"style."+t,e))).each(function(t,e){var n,i,r,o,a="style."+e,s="end."+a;return function(){var u=Re(this,t),l=u.on,h=null==u.value[a]?o||(o=Tn(e)):void 0;l===n&&r===h||(i=(n=l).copy()).on(s,r=h),u.on=i}}(this._id,t)):this.styleTween(t,function(t,e,n){var i,r,o=n+"";return function(){var a=O(this,t);return a===o?null:a===i?r:r=e(i=a,n)}}(t,i,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;return this.tween(i,Sn(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ze(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,Mn(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,r=Ie(this.node(),n).tween,o=0,a=r.length;o<a;++o)if((i=r[o]).name===t)return i.value;return null}return this.each((null==e?Je:Qe)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?xn:_n)(e,t)):Ie(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?bn:kn)(e,t)):Ie(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each($n(e,t)):Ie(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;Re(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,i=n._id,r=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--r&&o()}};n.each((function(){var n=Re(this,i),r=n.on;r!==t&&((e=(t=r).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(u)),n.on=e})),0===r&&o()}))},[Symbol.iterator]:Wn[Symbol.iterator]};var Bn={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Pn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}gt.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,i,r,o=t.__transition,a=!0;if(o){for(r in e=null==e?null:e+"",o)(n=o[r]).name===e?(i=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(i?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[r]):a=!1;a&&delete t.__transition}}(this,t)}))},gt.prototype.transition=function(t){var e,n;t instanceof Hn?(e=t._id,t=t._name):(e=jn(),(n=Bn).time=Se(),t=null==t?null:t+"");for(var i=this._groups,r=i.length,o=0;o<r;++o)for(var a,s=i[o],u=s.length,l=0;l<u;++l)(a=s[l])&&ze(a,t,e,l,s,n||Pn(a,e));return new Hn(i,this._parents,t,e)};const zn=["#F44336","#E91E63","#9C27B0","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722"];class Dn{constructor(t){this.graph={links:[],nodes:[]},this.maxRow=0,this.options={axisColor:"rgba(0,0,0,0.25)",axisFontSize:8,axisHeight:2,axisMargin:8,axisTickHeight:12,axisTickWidth:3,curveHeight:50,curveWidth:200,distHandleWidth:3,distributions:!0,dynamicLinkWidth:!0,dynamicNodeHeight:!1,endColor:"#FF9800",fadeOpacity:.3,fontColor:"white",fontSize:20,height:window.innerHeight,layout:"default",linkTitle:t=>`${t.source.label} → ${t.target.label}\n${t.flow}`,margin:60,marginTop:25,maxLinkWidth:50,maxNodeHeight:100,meanBarColor:"rgba(0,0,0,0.25)",meanBarWidth:3,nodeTitle:t=>t.label,startColor:"#9C27B0",ticks:25,transitionSpeed:75,width:window.innerWidth},this.timeline=t}calculateLinkPaths(){this.graph.links.forEach(((t,e)=>{const n=t.source.layout.y+t.source.layout.height/2,i=t.target.layout.y+t.target.layout.height/2,r=[[t.source.layout.x+t.source.layout.width,n],[t.source.layout.x+t.source.layout.width+this.options.curveWidth,n],[t.target.layout.x-this.options.curveWidth,i],[t.target.layout.x,i]];let o;o=t.isSelfLinking?`M${t.source.layout.x+t.source.layout.width-5},${n}C${t.source.layout.x+t.source.layout.width+this.options.curveWidth},${n-this.options.curveHeight},${t.target.layout.x-this.options.curveWidth},${i-this.options.curveHeight},${t.target.layout.x+5},${i}`:`M${r[0][0]},${r[0][1]}C${r[1][0]},${r[1][1]},${r[2][0]},${r[2][1]},${r[3][0]},${r[3][1]}`;let a=this.options.maxLinkWidth;return 0!==this.timeline.maxFlow&&this.options.dynamicLinkWidth&&(a*=t.flow/this.timeline.maxFlow),this.graph.links[e].layout={curve:r,path:o,width:a},e}))}calculateDistributionLayout(){this.graph.nodes.forEach((t=>{var e;"number"==typeof(e=t.times).meanTime&&"number"==typeof e.stdDeviation&&this.options.distributions&&(t.layout.distribution=[{x:this.getTimeX((t.times.meanTime||0)-(t.times.stdDeviation||0)),y:t.layout.y},{x:this.getTimeX((t.times.meanTime||0)+(t.times.stdDeviation||0)),y:t.layout.y}])}))}calculateLayout(){this.graph=this.timeline.graph,this.initializeLayout();const t=[],e=[],n=[],i=[];let r=-1,o=-1,a=0;const s=(o,u)=>{if(o.layout.column<0&&(u>=t.length&&(t.push([]),i.push(0),e.push(0),n.push(0)),u>r&&(r=u),o.setColumn(u),t[u].push(o),o.textWidth>e[u]&&(e[u]=o.textWidth),o.outgoingLinks.forEach((t=>{s(t.target,u+1)})),0===u)){const t=this.getTimeX(o.times.meanTime||0)-o.layout.width/2;t<a&&(a=t)}};this.timeline.sourceNodes.forEach((t=>{s(t,0)}));for(let t=1;t<e.length;t+=1)n[t]=n[t-1]+e[t-1];t.forEach((t=>{for(let e=0;e<t.length;e+=1)t[e].layout.row=e,e>o&&(o=e)}));let u=0;return this.graph.nodes.forEach((t=>{if(t.setColor(zn[u]),u+=1,u>=zn.length&&(u=0),"default"===this.options.layout)t.persist?(t.layout.x=t.persist.default.x,t.layout.y=t.persist.default.y):(t.layout.x=n[t.layout.column],t.layout.y=t.layout.row/(o+1)*this.options.height);else if("timeline"===this.options.layout){const e=this.options.margin;this.options.margin+=-a,t.layout.x=this.getTimeX(t.times.meanTime||0)-t.layout.width/2,t.persist?t.layout.y=t.persist.timeline.y:t.layout.y=t.layout.row/(o+1)*this.options.height,this.options.margin=e}})),this.calculateLinkPaths(),this.calculateDistributionLayout(),this.maxRow=o,this.graph}initializeLayout(){this.graph.nodes.forEach(((t,e)=>{const n=this.getTimeX(t.times.meanTime||0),i=t.layout.width;let r=this.options.maxNodeHeight;this.options.dynamicNodeHeight&&(r*=t.size/this.timeline.maxSize),this.graph.nodes[e].layout={baseRow:0,color:"",column:-1,height:r,row:-1,width:i,x:n,y:0}}))}get range(){return[this.options.margin,this.options.width-this.options.margin]}render(t){t.append("g").selectAll("g").data(this.timeline.graph.nodes).join("g").append("text").data(this.timeline.graph.nodes).attr("text-anchor","middle").attr("dominant-baseline","middle").style("fill",this.options.fontColor).style("font-size",`${this.options.fontSize}px`).text((t=>t.label)).each((function(t){t.textHeight=this.getBBox().height,t.textWidth=this.getBBox().width,t.layout.width=t.textWidth}));const e=this.calculateLayout();if(t.style("background","#fff").style("width",this.options.width).style("height",this.options.height),"timeline"===this.options.layout){const e=t.append("g").style("width","100%");e.append("rect").attr("width","100%").attr("height",this.options.axisHeight).attr("fill",this.options.axisColor);const n=Math.round((this.timeline.maxTime-this.timeline.minTime)/this.options.ticks);for(let t=this.timeline.minTime;t<=this.timeline.maxTime+1;t+=1)if(t%n==0){const n=this.getTimeX(t);e.append("text").text(Math.round(t)).attr("x",n+this.options.axisTickWidth).attr("y",this.options.axisHeight+this.options.axisMargin).attr("font-size",this.options.axisFontSize),e.append("rect").style("height",this.options.axisTickHeight-this.options.axisHeight).style("width",this.options.axisTickWidth).attr("x",n).attr("y",this.options.axisHeight).attr("fill",this.options.axisColor)}}const n=t.append("g").attr("fill","none").selectAll("g").data(e.links).join("g").attr("stroke",(t=>Bt(t.source.layout.color).toString())).attr("class","link").style("mix-blend-mode","multiply");n.append("path").attr("d",(t=>t.layout.path)).attr("stroke-width",(t=>Math.max(1,t.layout.width))),n.append("title").text(this.options.linkTitle);const{options:i}=this,r=this.timeline,o=t.append("g").selectAll("g").data(e.nodes).join("g").attr("x",(t=>t.layout.x)).attr("y",(t=>t.layout.y)).attr("height",(t=>t.layout.height)).attr("width",(t=>t.layout.width)).attr("class","node").on("mouseover",(function(t,e){const n=On().duration(i.transitionSpeed).ease(ve);mt(this).selectAll(".distHandle").transition(n).style("opacity",1);let o=[];const a=r.getPath(e.id);a.forEach((t=>{(0===o.length||t.length<o.length)&&(o=t)})),vt(".node").each((function(t){const e=t;a.flat().indexOf(e.id)<0&&mt(this).transition(n).style("opacity",i.fadeOpacity)}));const s=[];a.forEach((t=>{s.push(...r.getLinksInPath(t))})),vt(".link").each((function(t){const e=t;s.indexOf(e.id)<0&&mt(this).transition(n).style("opacity",i.fadeOpacity)}))})).on("mouseleave",(()=>{const t=On().duration(this.options.transitionSpeed).ease(ve);vt(".node, .link").transition(t).style("opacity",1),vt(".distHandle").transition(t).style("opacity",i.fadeOpacity)})).call(function(){var t,e,n,i,r=pe,o=ye,a=ge,s=me,u={},l=ae("start","drag","end"),h=0,c=0;function f(t){t.on("mousedown.drag",d).filter(s).on("touchstart.drag",g).on("touchmove.drag",m,ue).on("touchend.drag touchcancel.drag",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(a,s){if(!i&&r.call(this,a,s)){var u=w(this,o.call(this,a,s),a,s,"mouse");u&&(mt(a.view).on("mousemove.drag",p,le).on("mouseup.drag",y,le),function(t){var e=t.document.documentElement,n=mt(t).on("dragstart.drag",ce,le);"onselectstart"in e?n.on("selectstart.drag",ce,le):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(a.view),he(a),n=!1,t=a.clientX,e=a.clientY,u("start",a))}}function p(i){if(ce(i),!n){var r=i.clientX-t,o=i.clientY-e;n=r*r+o*o>c}u.mouse("drag",i)}function y(t){mt(t.view).on("mousemove.drag mouseup.drag",null),function(t,e){var n=t.document.documentElement,i=mt(t).on("dragstart.drag",null);e&&(i.on("click.drag",ce,le),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,n),ce(t),u.mouse("end",t)}function g(t,e){if(r.call(this,t,e)){var n,i,a=t.changedTouches,s=o.call(this,t,e),u=a.length;for(n=0;n<u;++n)(i=w(this,s,t,e,a[n].identifier,a[n]))&&(he(t),i("start",t,a[n]))}}function m(t){var e,n,i=t.changedTouches,r=i.length;for(e=0;e<r;++e)(n=u[i[e].identifier])&&(ce(t),n("drag",t,i[e]))}function v(t){var e,n,r=t.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout((function(){i=null}),500),e=0;e<o;++e)(n=u[r[e].identifier])&&(he(t),n("end",t,r[e]))}function w(t,e,n,i,r,o){var s,c,d,p=l.copy(),y=se(o||n,e);if(null!=(d=a.call(t,new de("beforestart",{sourceEvent:n,target:f,identifier:r,active:h,x:y[0],y:y[1],dx:0,dy:0,dispatch:p}),i)))return s=d.x-y[0]||0,c=d.y-y[1]||0,function n(o,a,l){var g,m=y;switch(o){case"start":u[r]=n,g=h++;break;case"end":delete u[r],--h;case"drag":y=se(l||a,e),g=h}p.call(o,t,new de(o,{sourceEvent:a,subject:d,target:f,identifier:r,active:g,x:y[0]+s,y:y[1]+c,dx:y[0]-m[0],dy:y[1]-m[1],dispatch:p}),i)}}return f.filter=function(t){return arguments.length?(r="function"==typeof t?t:fe(!!t),f):r},f.container=function(t){return arguments.length?(o="function"==typeof t?t:fe(t),f):o},f.subject=function(t){return arguments.length?(a="function"==typeof t?t:fe(t),f):a},f.touchable=function(t){return arguments.length?(s="function"==typeof t?t:fe(!!t),f):s},f.on=function(){var t=l.on.apply(l,arguments);return t===l?f:t},f.clickDistance=function(t){return arguments.length?(c=(t=+t)*t,f):Math.sqrt(c)},f}().on("drag",((e,n)=>{n.persist||(n.persist={default:{x:0,y:0},timeline:{y:0}}),"timeline"!==i.layout?(n.layout.x=e.x,n.layout.y=e.y,n.persist.default.x=e.x,n.persist.default.y=e.y):(n.layout.y=e.y,n.persist.timeline.y=e.y);const r=n.layout.y+n.layout.height;r>this.options.height&&(this.options.height=r,t.style("height",r));const o=n.layout.x+n.layout.width;o>this.options.width&&(this.options.width=o,t.style("width",o))})).on("drag.update",(()=>{vt(".node").each((function(t){const e=mt(this);e.select(".nodeFill").attr("x",(()=>t.layout.x)).attr("y",(()=>t.layout.y)),e.select(".labelBox").attr("x",(()=>t.layout.x)).attr("y",(()=>t.layout.y)),e.select("text").attr("x",(()=>t.layout.x+t.layout.width/2)).attr("y",(()=>t.layout.y+t.layout.height/2)),e.select(".meanValue").attr("x",(()=>t.layout.x+t.layout.width/2)).attr("y",(()=>t.layout.y-i.meanBarWidth)),e.select(".labelBox").attr("x",(()=>t.layout.x)).attr("y",(()=>t.layout.y+t.layout.height/2-t.textHeight/2)),vt(".link").each((function(e){const n=e.layout.path.substring(1).split(",");e.source.id===t.id?e.layout.path=`M${t.layout.x+t.layout.width},${t.layout.y+t.layout.height/2}C${t.layout.x+t.layout.width+i.curveWidth},${t.layout.y+t.layout.height/2},${n[3]},${n[4]},${n[5]},${n[6]}`:e.target.id===t.id&&(e.layout.path=`M${n[0]},${n[1].split("C")[0]}C${n[1].split("C")[1]},${n[2]},${t.layout.x-i.curveWidth},${t.layout.y+t.layout.height/2},${t.layout.x},${t.layout.y+t.layout.height/2}`),mt(this).select("path").attr("d",e.layout.path)})),e.select(".distHandleLeft").attr("y",(()=>t.layout.y)),e.select(".distHandleCenter").attr("y",(()=>t.layout.y+t.layout.height/2)),e.select(".distHandleRight").attr("y",(()=>t.layout.y))}))})));if(o.append("rect").attr("class","labelBox").style("fill","rgba(0,0,0,0.2)").attr("x",(t=>t.layout.x)).attr("y",(t=>t.layout.y+t.layout.height/2-t.textHeight/2)).attr("width",(t=>t.textWidth)).attr("height",(t=>t.textHeight)),o.append("rect").attr("class","nodeFill").attr("fill",(t=>t.layout.color)).attr("x",(t=>t.layout.x)).attr("y",(t=>t.layout.y)).attr("height",(t=>t.layout.height)).attr("width",(t=>t.layout.width)),o.append("title").text((t=>this.options.nodeTitle(t))),"timeline"===this.options.layout){const t="rgba(0,0,0)";o.append("rect").attr("x",(t=>t.layout.distribution?t.layout.distribution[0].x:0)).attr("y",(t=>t.layout.distribution?t.layout.distribution[0].y:0)).attr("class","distHandle distHandleLeft").attr("height",(t=>t.layout.height)).attr("width",(()=>this.options.distHandleWidth)).attr("fill",t).style("opacity",this.options.fadeOpacity),o.append("rect").attr("x",(t=>t.layout.distribution?t.layout.distribution[1].x:0)).attr("y",(t=>t.layout.distribution?t.layout.distribution[1].y:0)).attr("class","distHandle distHandleRight").attr("height",(t=>t.layout.height)).attr("width",(()=>this.options.distHandleWidth)).attr("fill",t).style("opacity",this.options.fadeOpacity),o.append("rect").attr("x",(t=>t.layout.distribution?t.layout.distribution[0].x:0)).attr("y",(t=>t.layout.distribution?t.layout.y+t.layout.height/2:0)).attr("class","distHandle distHandleCenter").attr("height",(()=>this.options.distHandleWidth)).attr("width",(t=>t.layout.distribution?t.layout.distribution[1].x-t.layout.distribution[0].x:0)).attr("fill",t).style("opacity",this.options.fadeOpacity),o.append("rect").attr("x",(t=>t.layout.x+t.layout.width/2)).attr("y",(t=>t.layout.y-this.options.meanBarWidth)).attr("class","meanValue").attr("width",this.options.meanBarWidth).attr("height",(t=>t.layout.height+2*this.options.meanBarWidth)).attr("fill",this.options.meanBarColor)}o.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("class","label").style("fill",this.options.fontColor).style("font-size",`${this.options.fontSize}px`).text((t=>t.label)).attr("x",(t=>t.layout.x+t.layout.width/2)).attr("y",(t=>t.layout.y+t.layout.height/2))}getTimeX(t){let e=this.timeline.minTime;return this.timeline.minTime<0&&(e=0-this.timeline.minTime),(this.range[1]-this.range[0])*((t+e)/(this.timeline.maxTime+e-(this.timeline.minTime+e)))+this.range[0]}}var Rn=n(821),In=n.n(Rn);class Xn{constructor(t,e,n,i,r){this.layout={curve:[],path:"",width:0},this.graph=t,this.id=e,this.source=n,this.target=i,this.flow=r}get isCircular(){if(this.isSelfLinking)return!0;let t=!1;return this.graph.circuits.forEach((e=>{const n=e.slice(-2);n[0]===this.source.id&&n[1]===this.target.id&&(t=!0)})),t}get isSelfLinking(){return this.source.id===this.target.id}}class qn{constructor(t,e,n,i){this.incomingLinks=[],this.layout={baseRow:0,color:"",column:-1,height:0,row:-1,width:0,x:0,y:0},this.outgoingLinks=[],this.textHeight=0,this.textWidth=0,this.graph=t,this.id=e,this.label=n,this.times=i}addIncomingLink(t){return this.incomingLinks.push(t),this}addOutgoingLink(t){return this.outgoingLinks.push(t),this}get links(){return this.incomingLinks.concat(this.outgoingLinks)}setColor(t){this.layout.color=t}setColumn(t){this.layout.column=t}setRow(t){this.layout.row=t}get size(){return this.data.count}}class Fn{constructor(){this.keyTimes=[],this.links={},this.nextLinkId=0,this.nextNodeId=0,this.nodes={}}addKeyTimes(...t){t.forEach((t=>{this.keyTimes.indexOf(t)<0&&(this.keyTimes.push(t),this.keyTimes.sort(((t,e)=>t-e)))}))}clear(){this.nodes={},this.links={},this.keyTimes=[],this.nextLinkId=0,this.nextNodeId=0}createLink(t,e,n=0){let i,r;"number"==typeof t?i=this.nodes[t]:"string"==typeof t?[i]=this.getNodesByLabel(t):i=t,"number"==typeof e?r=this.nodes[e]:"string"==typeof e?[r]=this.getNodesByLabel(e):r=e;const o=new Xn(this,this.nextLinkId,i,r,n);return i.addOutgoingLink(o),r.addIncomingLink(o),this.links[this.nextLinkId]=o,this.nextLinkId+=1,o}createNode(t,e){const n=new qn(this,this.nextNodeId,t,e);return this.nodes[this.nextNodeId]=n,this.addKeyTimes(...function(t){return[t.meanTime||0]}(e)),this.nextNodeId+=1,n}get circuits(){const t=[];return Object.values(this.links).forEach((e=>{const n=e.source.id,i=e.target.id;t[n]||(t[n]=[]),t[i]||(t[i]=[]),t[n].indexOf(i)<0&&t[n].push(i)})),In()(t)}getLinksInPath(t){var e;const n=[];for(let i=t.length-1;i>0;i-=1){const r=null===(e=this.nodes[t[i]].outgoingLinks.find((e=>e.target.id===t[i-1])))||void 0===e?void 0:e.id;void 0!==r&&n.push(r)}return n}getNodesByLabel(t){return Object.values(this.nodes).filter((e=>e.label===t))}getPath(t,e=[]){const n=this.nodes[t],i=[];return 0===n.incomingLinks.length?i.push([t]):n.incomingLinks.filter((t=>e.indexOf(t.id)<0)).forEach((n=>{n.isCircular&&e.push(n.id),this.getPath(n.source.id,e).forEach((e=>{i.push([t].concat(e))}))})),i}get graph(){return{links:Object.values(this.links),nodes:Object.values(this.nodes).sort(((t,e)=>t.links.length-e.links.length))}}get maxFlow(){let t=0;return Object.values(this.links).forEach((e=>{e.flow>t&&(t=e.flow)})),t}get maxSize(){let t=0;return Object.values(this.nodes).forEach((e=>{e.size>t&&(t=e.size)})),t}get maxTime(){return this.keyTimes.length>0?this.keyTimes[this.keyTimes.length-1]:0}get minTime(){return this.keyTimes.length>0?this.keyTimes[0]:0}get sinkNodes(){return Object.values(this.nodes).filter((t=>0===t.outgoingLinks.length))}get sourceNodes(){return Object.values(this.nodes).filter((t=>0===t.incomingLinks.length))}}const Vn=[];function Yn(){let t=new Fn;const e=window.data,n=document.getElementById("keyStateOptions");function i(t,e){const n={},i={};return t.keyStates.filter((t=>e.indexOf(t.name)>=0)).forEach((t=>{t.paths.forEach((t=>{n[t.name]?(n[t.name].count+=t.count,n[t.name].combined.c.push(t.count),n[t.name].combined.n.push(t.count/t.contributionRate),n[t.name].combined.x.push(u(t.timeMean)),n[t.name].combined.s.push(u(t.timeStdDeviation))):n[t.name]=Object.assign(Object.assign({},t),{combined:{c:[t.count],n:[t.count/t.contributionRate],x:[u(t.timeMean)],s:[u(t.timeStdDeviation)]}}),t.exits.forEach((e=>{i[t.name]||(i[t.name]={}),i[t.name][e.otherState]?i[t.name][e.otherState].count+=e.cnt:i[t.name][e.otherState]={actDesc:e.actDesc,count:e.cnt,desc:e.desc,evDesc:e.evDesc,name:e.name}}))}))})),[n,i]}let r={},o={};e.keyStates.forEach((t=>{Vn.push(t.name);const a=document.createElement("input");a.type="checkbox",a.checked=!0,a.setAttribute("data-state",t.name),a.addEventListener("change",(function(){!function(t){const e=Vn.indexOf(t);e<0?Vn.push(t):Vn.splice(e,1)}(this.getAttribute("data-state"));const t=i(e,Vn);r=t[0],o=t[1],d(),p()}));const s=document.createTextNode(t.name);null==n||n.appendChild(a),null==n||n.appendChild(s)}));const a=i(e,Vn);r=a[0],o=a[1];const s=new Dn(t);function u(t){const e=t.split(":").map((t=>Number(t)));return e[2]+60*e[1]+3600*e[0]}function l(t){return new Date(1e3*t).toISOString().slice(11,19)}function h(t){let e=0,n=0;return t.combined.n.forEach(((i,r)=>{e+=i*t.combined.x[r],n+=i})),e/n}function c(t){let e=0,n=0,i=t.combined.n.length;return t.combined.n.forEach(((i,r)=>{e+=(i-1)*t.combined.s[r]**2,n+=i})),Math.sqrt(e/(n-i))}function f(t){let e=0,n=0;t.combined.n.forEach(((i,r)=>{e+=t.combined.c[r],n+=i}));const i=e/n;return[i-1.96*Math.sqrt(i*(1-i)/n),i+1.96*Math.sqrt(i*(1-i)/n)]}function d(e=!1){t.clear(),Object.keys(r).forEach((e=>{const n=r[e];let i=h(n)-2500;i<0&&(i=0);const o=t.createNode(n.name,{endTime:h(n)+2500,meanTime:h(n),startTime:i,stdDeviation:c(n)});o.data=n,n.layout&&(o.persist=n.layout),r[e].timelineNode=o})),Object.keys(r).forEach((e=>{o[e]&&Object.entries(o[e]).forEach((([n,i])=>{t.createLink(r[e].timelineNode,r[n].timelineNode,i.count).data=i}))}))}function p(){vt("svg > *").remove(),s.render(mt("svg"))}s.options.height=window.innerHeight,s.options.width=window.innerWidth,s.options.dynamicNodeHeight=!0,s.options.layout="default",e.options?(s.options.fontSize=e.options.fontSize,s.options.maxNodeHeight=e.options.maxNodeHeight,s.options.maxLinkWidth=e.options.maxLinkWidth):(s.options.maxNodeHeight=window.innerHeight/7,s.options.maxLinkWidth=s.options.maxNodeHeight/2),s.options.nodeTitle=t=>`Name: ${t.label}\nCount: ${t.data.count}\nRate 5th: ${f(t.data)[0]}\nRate 95th: ${f(t.data)[1]}\nContribution Rate: ${t.data.contributionRate}\nMin Time: ${t.data.timeMin}\nMax Time: ${t.data.timeMax}\nMean Time: ${l(h(t.data))}\nStandard Deviation: ${l(c(t.data))}\nRow: ${t.layout.row},Col: ${t.layout.column}`,s.options.linkTitle=t=>`${t.data.name}\n${t.data.desc}\nAction Description: ${t.data.actDesc}\nEvent Description: ${t.data.evDesc}\nCount: ${t.data.count}`,d(),s.render(mt("svg")),window.toggleTimelineMode=t=>{s.options.layout=t?"default":"timeline",p()},window.toggleOtherStatesMode=t=>{d(t),p()},window.zoomIn=()=>{s.options.fontSize*=1.1,s.options.maxNodeHeight*=1.1,s.options.maxLinkWidth*=1.1,p()},window.zoomOut=()=>{s.options.fontSize*=.9,s.options.maxNodeHeight*=.9,s.options.maxLinkWidth*=.9,p()},window.saveDiagram=()=>{const n=e;n.keyStates.forEach(((e,i)=>{e.paths.forEach(((e,r)=>{n.keyStates[i].paths[r].layout=t.getNodesByLabel(e.name)[0].persist,delete n.keyStates[i].paths[r].timelineNode}))})),n.options={fontSize:s.options.fontSize,maxNodeHeight:s.options.maxNodeHeight,maxLinkWidth:s.options.maxLinkWidth};const i=document.createElement("a"),r=new Blob([JSON.stringify(n)],{type:"text/plain"});i.href=URL.createObjectURL(r),i.download=e.fileName,i.click(),URL.revokeObjectURL(i.href)},window.addEventListener("resize",(()=>{s.options.width=window.innerWidth,s.options.height=window.innerHeight,s.options.maxNodeHeight=window.innerHeight/7,s.options.maxLinkWidth=s.options.maxNodeHeight/2,s.options.fontSize=25,p()}))}})(),sankeyTimeline=i})();